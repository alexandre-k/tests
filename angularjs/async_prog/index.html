<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Asynchrounous programming</title>
          </head>
    <body>
    </body>
<script src='node_modules/rx/dist/rx.all.js'></script>
<script>
'use strict';

function getStocksOver(stocks, minPrice) {
    return stocks.filter(function(stock){
        return stock.price >= minPrice;
    });
}

function getStockSymbols(stocks) {
    return stocks.map(function(stock) {
        return stock.symbol;
    });

}

var stocks = [
        { symbol: 'XFX', price: 240.22, volume: 2324 },
        { symbol: 'TNZ', price: 332.19, volume: 234 },
        { symbol: 'JXJ', price: 120.22, volume: 4501 },
        { symbol: 'EOW', price: 350.84, volume: 140 },
];

var exchanges = [
    [
        { symbol: 'XFX', price: 240.22, volume: 2324 },
        { symbol: 'TNZ', price: 332.19, volume: 234 },
        { symbol: 'JXJ', price: 120.22, volume: 4501 },
        { symbol: 'EOW', price: 350.84, volume: 140 },
    ],
    [
        { symbol: 'JFE', price: 982.21, volume: 310 },
        { symbol: 'OWE', price: 678.12, volume: 877},
        { symbol: 'CPW', price: 892.76, volume: 102 },
        { symbol: 'LAK', price: 123.10, volume: 537},
    ]
]

Array.prototype.concatAll = function(){
    var results = [];
    this.forEach(function(subArray){
        subArray.forEach(function(item){
            results.push(item);
        });
    });
    return results;
}

var stocks_concat = exchanges.concatAll();
stocks_concat.forEach(function(stock){
    console.log(JSON.stringify(stock));
});

exchanges.forEach(function(exchange){
    exchange.forEach(function(stock){
        console.log(JSON.stringify(stock));
    });
});


var filteredStockSymbols =
stocks.filter(function(stock) {
    return stock.price >= 300;
}).map(function (stock){
    return stock.symbol;
})

console.log('Filtered stocks ' + filteredStockSymbols);

filteredStockSymbols.forEach(function(symbol){
    console.log(symbol);
})

var expensiveStocks = getStocksOver(stocks, 300);
console.log('Expensive stocks are: ' + JSON.stringify(expensiveStocks));

var Observable = Rx.Observable;

try {
    clicks
}
</script>

</html>

